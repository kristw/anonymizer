"use strict";!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.anonymizer=t()}(this,function(){function e(e){t(e)?(this.categories=e,this.categoryLookup=e.reduce(function(e,t,r){return e[t]=r,e},{})):(this.categories=[],this.categoryLookup={})}var t=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},r=function(e){return"object"==typeof e&&null!==e},o=e.prototype;return o.getCategoryCode=function(e){return this.categoryLookup.hasOwnProperty(e)?this.categoryLookup[e]:(this.categories.push(e),this.categoryLookup[e]=this.categories.length,this.categories.length)},o.getCategoryName=function(e){return e>this.categories.length?null:this.categories[e-1]},o.getCategories=function(){return this.categories},o.encode=function(e,o){var n=this;if(t(e)){var i=t(o)&&o.length>0?o[0]:null;return e.map(function(e){return n.encode(e,i)})}if(r(e)){if(!r(o))throw"Expect schema to be an object but receive: "+JSON.stringify(o);return Object.keys(o).map(function(t){return n.encode(e[t],o[t])})}return"Category"===o?this.getCategoryCode(e):e},o.decode=function(e,o){var n=this;if(t(o)){var i=t(o)&&o.length>0?o[0]:null;return e.map(function(e){return n.decode(e,i)})}return r(o)?Object.keys(o).reduce(function(t,r,i){return t[r]=n.decode(e[i],o[r]),t},{}):"Category"===o?this.getCategoryName(e):e},e});